{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as PropTypes from 'prop-types';\nimport { slide } from './animation';\nimport { classNames, canUseDOM } from '@progress/kendo-react-common';\nimport { CollisionType, AlignPoint, throttle, FRAME_DURATION } from './util';\nimport { AlignService } from './services/alignService';\nimport { DOMService } from './services/domService';\nimport { PositionService } from './services/positionService';\n\nfunction isEquivalent(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (!!a !== !!b) {\n    return false;\n  }\n\n  var aProps = Object.getOwnPropertyNames(a);\n  var bProps = Object.getOwnPropertyNames(b);\n\n  if (aProps.length !== bProps.length) {\n    return false;\n  }\n\n  for (var i = 0; i < aProps.length; i++) {\n    var propName = aProps[i];\n\n    if (a[propName] !== b[propName]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nvar DEFAULT_OFFSET = {\n  left: -1000,\n  top: 0\n};\nvar Status;\n\n(function (Status) {\n  Status[\"hiding\"] = \"hiding\";\n  Status[\"hidden\"] = \"hidden\";\n  Status[\"showing\"] = \"showing\";\n  Status[\"shown\"] = \"shown\";\n  Status[\"reposition\"] = \"reposition\";\n})(Status || (Status = {}));\n\nvar ANIMATION_CONTAINER = 'k-animation-container';\nvar ANIMATION_CONTAINER_SHOWN = 'k-animation-container-shown';\nvar ANIMATION_CONTAINER_RELATIVE = 'k-animation-container-relative';\nvar ANIMATION_CONTAINER_CHILD = 'k-child-animation-container';\nvar K_POPUP = 'k-popup';\n\nvar Popup =\n/** @class */\nfunction (_super) {\n  __extends(Popup, _super);\n\n  function Popup(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * @hidden\n     */\n\n\n    _this.state = {\n      current: Status.hidden,\n      previous: Status.hidden,\n      props: {}\n    };\n    _this._popup = null;\n\n    _this.show = function (popup) {\n      _this.setPosition(popup);\n\n      _this.animate(popup.firstChild, 'enter', _this.onOpened);\n\n      _this.setState({\n        current: Status.shown,\n        previous: _this.state.current\n      });\n    };\n\n    _this.setPosition = function (popup) {\n      var _a = _this.props,\n          anchorAlign = _a.anchorAlign,\n          popupAlign = _a.popupAlign,\n          collision = _a.collision,\n          offset = _a.offset,\n          anchor = _a.anchor;\n      var popupContent = popup.firstElementChild;\n\n      var alignedOffset = _this._alignService.alignElement({\n        anchor: anchor,\n        element: popupContent,\n        elementAlign: popupAlign,\n        anchorAlign: anchorAlign,\n        offset: offset\n      });\n\n      var position = _this._positionService.positionElement({\n        anchor: anchor,\n        anchorAlign: anchorAlign,\n        collisions: collision,\n        element: popupContent,\n        currentLocation: alignedOffset,\n        elementAlign: popupAlign\n      });\n\n      if (position.offset) {\n        popup.style.top = position.offset.top + 'px';\n        popup.style.left = position.offset.left + 'px';\n        popupContent.style.position = '';\n      }\n\n      _this._flipped = position.flipped;\n    };\n\n    _this.onOpened = function () {\n      var element = _this._popup;\n\n      if (!element) {\n        return;\n      }\n\n      if (_this.props.show) {\n        element.classList.add(ANIMATION_CONTAINER_SHOWN);\n      }\n\n      _this.attachRepositionHandlers(element);\n\n      if (_this.props.open) {\n        _this.props.open.call(undefined, {\n          target: _this\n        });\n      }\n\n      if (_this.props.onOpen) {\n        _this.props.onOpen.call(undefined, {\n          target: _this\n        });\n      }\n    };\n\n    _this.animate = function (element, type, callback) {\n      slide(element, _this._flipped ? 'up' : 'down', _this.animationDuration[type], type, callback);\n    };\n\n    _this.onClosing = function (popup) {\n      if (!_this.props.show) {\n        popup.classList.remove(ANIMATION_CONTAINER_SHOWN);\n      }\n\n      _this.detachRepositionHandlers();\n    };\n\n    _this.onClosed = function () {\n      if (_this.state.current === Status.hiding && _this.state.previous === Status.shown) {\n        _this.setState({\n          current: Status.hidden,\n          previous: _this.state.current\n        });\n      }\n\n      if (_this.props.close) {\n        _this.props.close.call(undefined, {\n          target: _this\n        });\n      }\n\n      if (_this.props.onClose) {\n        _this.props.onClose.call(undefined, {\n          target: _this\n        });\n      }\n    };\n\n    _this._domService = new DOMService();\n    _this._alignService = new AlignService(_this._domService);\n    _this._positionService = new PositionService(_this._domService);\n    _this.reposition = throttle(_this.reposition.bind(_this), FRAME_DURATION);\n    return _this;\n  }\n  /**\n   * @hidden\n   */\n\n\n  Popup.getDerivedStateFromProps = function (props, state) {\n    var show = props.show,\n        anchor = props.anchor,\n        anchorAlign = props.anchorAlign,\n        appendTo = props.appendTo,\n        collision = props.collision,\n        popupAlign = props.popupAlign,\n        className = props.className,\n        popupClass = props.popupClass,\n        style = props.style,\n        offset = props.offset;\n\n    var nextState = __assign({}, state, {\n      props: {\n        show: show,\n        anchor: anchor,\n        anchorAlign: anchorAlign,\n        appendTo: appendTo,\n        collision: collision,\n        popupAlign: popupAlign,\n        className: className,\n        popupClass: popupClass,\n        style: style,\n        offset: offset\n      }\n    });\n\n    if (props.show) {\n      if (state.current === Status.hidden || state.current === Status.hiding) {\n        return __assign({}, nextState, {\n          current: Status.showing,\n          previous: state.current\n        });\n      } else if (state.current === Status.showing) {\n        return __assign({}, nextState, {\n          current: Status.shown,\n          previous: state.current\n        });\n      }\n\n      if (state.current === Status.shown && (!isEquivalent(offset, state.props.offset) || !isEquivalent(anchorAlign, state.props.anchorAlign) || !isEquivalent(appendTo, state.props.appendTo) || !isEquivalent(collision, state.props.collision) || !isEquivalent(popupAlign, state.props.popupAlign) || !isEquivalent(style, state.props.style) || !isEquivalent(offset, state.props.offset) || anchor !== state.props.anchor || popupClass !== state.props.popupClass || className !== state.props.className)) {\n        return __assign({}, nextState, {\n          current: Status.reposition,\n          previous: state.current\n        });\n      }\n    } else {\n      if (state.current === Status.shown || state.current === Status.showing) {\n        return __assign({}, nextState, {\n          current: Status.hiding,\n          previous: state.current\n        });\n      } else if (state.current === Status.hiding) {\n        return __assign({}, nextState, {\n          current: Status.hidden,\n          previous: state.current\n        });\n      }\n    }\n\n    return nextState;\n  };\n  /**\n   * @hidden\n   */\n\n\n  Popup.prototype.componentDidUpdate = function (_prevProps) {\n    if (this.state.current === Status.showing && this._popup) {\n      this.show(this._popup);\n    } else if (this.state.current === Status.hiding && this._popup) {\n      this.onClosing(this._popup);\n      this.animate(this._popup.firstChild, 'exit', this.onClosed);\n    } else if (this.state.current === Status.reposition && this.state.previous === Status.shown) {\n      this.setState({\n        current: Status.shown,\n        previous: this.state.current\n      });\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  Popup.prototype.componentDidMount = function () {\n    if (this.state.current === Status.showing && this._popup) {\n      this.show(this._popup);\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  Popup.prototype.componentWillUnmount = function () {\n    this.detachRepositionHandlers();\n  };\n  /**\n   * @hidden\n   */\n\n\n  Popup.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        children = _a.children,\n        className = _a.className,\n        popupClass = _a.popupClass,\n        show = _a.show,\n        id = _a.id,\n        _b = _a.appendTo,\n        appendTo = _b === void 0 ? canUseDOM ? document.body : undefined : _b;\n\n    if (this.state.current === Status.reposition && this.state.previous === Status.shown && this._popup) {\n      this.setPosition(this._popup);\n    }\n\n    var style = Object.assign({}, {\n      position: 'absolute'\n    }, this.props.style || {});\n    var closing = this.state.current === Status.hiding && this.state.previous === Status.shown;\n\n    if ((show || closing) && appendTo) {\n      var popup = React.createElement(\"div\", {\n        className: classNames(ANIMATION_CONTAINER, ANIMATION_CONTAINER_RELATIVE, className),\n        id: id,\n        ref: function (e) {\n          return _this._popup = e;\n        },\n        style: style\n      }, React.createElement(\"div\", {\n        className: classNames(popupClass, K_POPUP, ANIMATION_CONTAINER_CHILD),\n        style: {\n          transitionDelay: '0ms',\n          position: 'absolute'\n        }\n      }, children));\n      return ReactDOM.createPortal(popup, appendTo);\n    }\n\n    return null;\n  };\n\n  Object.defineProperty(Popup.prototype, \"animationDuration\", {\n    get: function () {\n      var animate = this.props.animate;\n      var enter = 0;\n      var exit = 0;\n\n      if (animate) {\n        if (animate === true) {\n          enter = exit = 300;\n        } else {\n          enter = animate.openDuration || 0;\n          exit = animate.closeDuration || 0;\n        }\n      }\n\n      return {\n        enter: enter,\n        exit: exit\n      };\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Popup.prototype.attachRepositionHandlers = function (element) {\n    var _this = this;\n\n    this.detachRepositionHandlers();\n    this._scrollableParents = this._domService.scrollableParents(this.props.anchor || element);\n\n    this._scrollableParents.map(function (p) {\n      return p.addEventListener('scroll', _this.reposition);\n    });\n\n    window.addEventListener('resize', this.reposition);\n  };\n\n  Popup.prototype.detachRepositionHandlers = function () {\n    var _this = this;\n\n    if (this._scrollableParents) {\n      this._scrollableParents.map(function (p) {\n        return p.removeEventListener('scroll', _this.reposition);\n      });\n\n      this._scrollableParents = undefined;\n    }\n\n    window.removeEventListener('resize', this.reposition);\n  };\n\n  Popup.prototype.reposition = function () {\n    this.setState({\n      current: Status.reposition,\n      previous: this.state.current\n    });\n  };\n  /**\n   * @hidden\n   */\n\n\n  Popup.propTypes = {\n    anchor: function (props) {\n      var anchor = props.anchor;\n\n      if (anchor && typeof anchor.nodeType !== 'number') {\n        return new Error('Invalid prop `anchor` supplied to `Kendo React Popup`. Validation failed.');\n      }\n    },\n    appendTo: function (props) {\n      var element = props.appendTo;\n\n      if (element && typeof element.nodeType !== 'number') {\n        return new Error('Invalid prop `appendTo` supplied to `Kendo React Popup`. Validation failed.');\n      }\n    },\n    className: PropTypes.string,\n    id: PropTypes.string,\n    popupClass: PropTypes.string,\n    collision: PropTypes.shape({\n      horizontal: PropTypes.oneOf([CollisionType.fit, CollisionType.flip]),\n      vertical: PropTypes.oneOf([CollisionType.fit, CollisionType.flip])\n    }),\n    anchorAlign: PropTypes.shape({\n      horizontal: PropTypes.oneOf([AlignPoint.left, AlignPoint.center, AlignPoint.right]),\n      vertical: PropTypes.oneOf([AlignPoint.top, AlignPoint.center, AlignPoint.bottom])\n    }),\n    popupAlign: PropTypes.shape({\n      horizontal: PropTypes.oneOf([AlignPoint.left, AlignPoint.center, AlignPoint.right]),\n      vertical: PropTypes.oneOf([AlignPoint.top, AlignPoint.center, AlignPoint.bottom])\n    }),\n    offset: PropTypes.shape({\n      left: PropTypes.number,\n      top: PropTypes.number\n    }),\n    children: PropTypes.oneOfType([PropTypes.element, PropTypes.node]),\n    show: PropTypes.bool,\n    animate: PropTypes.oneOfType([PropTypes.bool, PropTypes.shape({\n      openDuration: PropTypes.number,\n      closeDuration: PropTypes.number\n    })])\n  };\n  /**\n   * @hidden\n   */\n\n  Popup.defaultProps = {\n    collision: {\n      horizontal: CollisionType.fit,\n      vertical: CollisionType.flip\n    },\n    anchorAlign: {\n      horizontal: AlignPoint.left,\n      vertical: AlignPoint.bottom\n    },\n    popupAlign: {\n      horizontal: AlignPoint.left,\n      vertical: AlignPoint.top\n    },\n    offset: DEFAULT_OFFSET,\n    animate: true,\n    show: false\n  };\n  return Popup;\n}(React.Component);\n\nexport default Popup;","map":{"version":3,"sources":["../../src/Popup.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as PropTypes from 'prop-types';\nimport { slide } from './animation';\nimport { classNames, canUseDOM } from '@progress/kendo-react-common';\nimport { CollisionType, AlignPoint, throttle, FRAME_DURATION } from './util';\nimport { AlignService } from './services/alignService';\nimport { DOMService } from './services/domService';\nimport { PositionService } from './services/positionService';\nfunction isEquivalent(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (!!a !== !!b) {\n        return false;\n    }\n    var aProps = Object.getOwnPropertyNames(a);\n    var bProps = Object.getOwnPropertyNames(b);\n    if (aProps.length !== bProps.length) {\n        return false;\n    }\n    for (var i = 0; i < aProps.length; i++) {\n        var propName = aProps[i];\n        if (a[propName] !== b[propName]) {\n            return false;\n        }\n    }\n    return true;\n}\nvar DEFAULT_OFFSET = {\n    left: -1000,\n    top: 0\n};\nvar Status;\n(function (Status) {\n    Status[\"hiding\"] = \"hiding\";\n    Status[\"hidden\"] = \"hidden\";\n    Status[\"showing\"] = \"showing\";\n    Status[\"shown\"] = \"shown\";\n    Status[\"reposition\"] = \"reposition\";\n})(Status || (Status = {}));\nvar ANIMATION_CONTAINER = 'k-animation-container';\nvar ANIMATION_CONTAINER_SHOWN = 'k-animation-container-shown';\nvar ANIMATION_CONTAINER_RELATIVE = 'k-animation-container-relative';\nvar ANIMATION_CONTAINER_CHILD = 'k-child-animation-container';\nvar K_POPUP = 'k-popup';\nvar Popup = /** @class */ (function (_super) {\n    __extends(Popup, _super);\n    function Popup(props) {\n        var _this = _super.call(this, props) || this;\n        /**\n         * @hidden\n         */\n        _this.state = { current: Status.hidden, previous: Status.hidden, props: {} };\n        _this._popup = null;\n        _this.show = function (popup) {\n            _this.setPosition(popup);\n            _this.animate(popup.firstChild, 'enter', _this.onOpened);\n            _this.setState({ current: Status.shown, previous: _this.state.current });\n        };\n        _this.setPosition = function (popup) {\n            var _a = _this.props, anchorAlign = _a.anchorAlign, popupAlign = _a.popupAlign, collision = _a.collision, offset = _a.offset, anchor = _a.anchor;\n            var popupContent = popup.firstElementChild;\n            var alignedOffset = _this._alignService.alignElement({\n                anchor: anchor,\n                element: popupContent,\n                elementAlign: popupAlign,\n                anchorAlign: anchorAlign,\n                offset: offset\n            });\n            var position = _this._positionService.positionElement({\n                anchor: anchor,\n                anchorAlign: anchorAlign,\n                collisions: collision,\n                element: popupContent,\n                currentLocation: alignedOffset,\n                elementAlign: popupAlign\n            });\n            if (position.offset) {\n                popup.style.top = position.offset.top + 'px';\n                popup.style.left = position.offset.left + 'px';\n                popupContent.style.position = '';\n            }\n            _this._flipped = position.flipped;\n        };\n        _this.onOpened = function () {\n            var element = _this._popup;\n            if (!element) {\n                return;\n            }\n            if (_this.props.show) {\n                element.classList.add(ANIMATION_CONTAINER_SHOWN);\n            }\n            _this.attachRepositionHandlers(element);\n            if (_this.props.open) {\n                _this.props.open.call(undefined, { target: _this });\n            }\n            if (_this.props.onOpen) {\n                _this.props.onOpen.call(undefined, { target: _this });\n            }\n        };\n        _this.animate = function (element, type, callback) {\n            slide(element, _this._flipped ? 'up' : 'down', _this.animationDuration[type], type, callback);\n        };\n        _this.onClosing = function (popup) {\n            if (!_this.props.show) {\n                popup.classList.remove(ANIMATION_CONTAINER_SHOWN);\n            }\n            _this.detachRepositionHandlers();\n        };\n        _this.onClosed = function () {\n            if (_this.state.current === Status.hiding && _this.state.previous === Status.shown) {\n                _this.setState({ current: Status.hidden, previous: _this.state.current });\n            }\n            if (_this.props.close) {\n                _this.props.close.call(undefined, { target: _this });\n            }\n            if (_this.props.onClose) {\n                _this.props.onClose.call(undefined, { target: _this });\n            }\n        };\n        _this._domService = new DOMService();\n        _this._alignService = new AlignService(_this._domService);\n        _this._positionService = new PositionService(_this._domService);\n        _this.reposition = throttle(_this.reposition.bind(_this), FRAME_DURATION);\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    Popup.getDerivedStateFromProps = function (props, state) {\n        var show = props.show, anchor = props.anchor, anchorAlign = props.anchorAlign, appendTo = props.appendTo, collision = props.collision, popupAlign = props.popupAlign, className = props.className, popupClass = props.popupClass, style = props.style, offset = props.offset;\n        var nextState = __assign({}, state, { props: {\n                show: show, anchor: anchor, anchorAlign: anchorAlign, appendTo: appendTo, collision: collision, popupAlign: popupAlign, className: className, popupClass: popupClass, style: style, offset: offset\n            } });\n        if (props.show) {\n            if (state.current === Status.hidden || state.current === Status.hiding) {\n                return __assign({}, nextState, { current: Status.showing, previous: state.current });\n            }\n            else if (state.current === Status.showing) {\n                return __assign({}, nextState, { current: Status.shown, previous: state.current });\n            }\n            if (state.current === Status.shown &&\n                (!isEquivalent(offset, state.props.offset) ||\n                    !isEquivalent(anchorAlign, state.props.anchorAlign) ||\n                    !isEquivalent(appendTo, state.props.appendTo) ||\n                    !isEquivalent(collision, state.props.collision) ||\n                    !isEquivalent(popupAlign, state.props.popupAlign) ||\n                    !isEquivalent(style, state.props.style) ||\n                    !isEquivalent(offset, state.props.offset) ||\n                    anchor !== state.props.anchor ||\n                    popupClass !== state.props.popupClass ||\n                    className !== state.props.className)) {\n                return __assign({}, nextState, { current: Status.reposition, previous: state.current });\n            }\n        }\n        else {\n            if (state.current === Status.shown || state.current === Status.showing) {\n                return __assign({}, nextState, { current: Status.hiding, previous: state.current });\n            }\n            else if (state.current === Status.hiding) {\n                return __assign({}, nextState, { current: Status.hidden, previous: state.current });\n            }\n        }\n        return nextState;\n    };\n    /**\n     * @hidden\n     */\n    Popup.prototype.componentDidUpdate = function (_prevProps) {\n        if (this.state.current === Status.showing && this._popup) {\n            this.show(this._popup);\n        }\n        else if (this.state.current === Status.hiding && this._popup) {\n            this.onClosing(this._popup);\n            this.animate(this._popup.firstChild, 'exit', this.onClosed);\n        }\n        else if (this.state.current === Status.reposition && this.state.previous === Status.shown) {\n            this.setState({ current: Status.shown, previous: this.state.current });\n        }\n    };\n    /**\n     * @hidden\n     */\n    Popup.prototype.componentDidMount = function () {\n        if (this.state.current === Status.showing && this._popup) {\n            this.show(this._popup);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Popup.prototype.componentWillUnmount = function () {\n        this.detachRepositionHandlers();\n    };\n    /**\n     * @hidden\n     */\n    Popup.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, children = _a.children, className = _a.className, popupClass = _a.popupClass, show = _a.show, id = _a.id, _b = _a.appendTo, appendTo = _b === void 0 ? canUseDOM ? document.body : undefined : _b;\n        if (this.state.current === Status.reposition && this.state.previous === Status.shown && this._popup) {\n            this.setPosition(this._popup);\n        }\n        var style = Object.assign({}, { position: 'absolute' }, this.props.style || {});\n        var closing = this.state.current === Status.hiding && this.state.previous === Status.shown;\n        if ((show || closing) && appendTo) {\n            var popup = (React.createElement(\"div\", { className: classNames(ANIMATION_CONTAINER, ANIMATION_CONTAINER_RELATIVE, className), id: id, ref: function (e) { return _this._popup = e; }, style: style },\n                React.createElement(\"div\", { className: classNames(popupClass, K_POPUP, ANIMATION_CONTAINER_CHILD), style: { transitionDelay: '0ms', position: 'absolute' } }, children)));\n            return ReactDOM.createPortal(popup, appendTo);\n        }\n        return null;\n    };\n    Object.defineProperty(Popup.prototype, \"animationDuration\", {\n        get: function () {\n            var animate = this.props.animate;\n            var enter = 0;\n            var exit = 0;\n            if (animate) {\n                if (animate === true) {\n                    enter = exit = 300;\n                }\n                else {\n                    enter = animate.openDuration || 0;\n                    exit = animate.closeDuration || 0;\n                }\n            }\n            return { enter: enter, exit: exit };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Popup.prototype.attachRepositionHandlers = function (element) {\n        var _this = this;\n        this.detachRepositionHandlers();\n        this._scrollableParents = this._domService.scrollableParents(this.props.anchor || element);\n        this._scrollableParents.map(function (p) { return p.addEventListener('scroll', _this.reposition); });\n        window.addEventListener('resize', this.reposition);\n    };\n    Popup.prototype.detachRepositionHandlers = function () {\n        var _this = this;\n        if (this._scrollableParents) {\n            this._scrollableParents.map(function (p) { return p.removeEventListener('scroll', _this.reposition); });\n            this._scrollableParents = undefined;\n        }\n        window.removeEventListener('resize', this.reposition);\n    };\n    Popup.prototype.reposition = function () {\n        this.setState({ current: Status.reposition, previous: this.state.current });\n    };\n    /**\n     * @hidden\n     */\n    Popup.propTypes = {\n        anchor: function (props) {\n            var anchor = props.anchor;\n            if (anchor && typeof anchor.nodeType !== 'number') {\n                return new Error('Invalid prop `anchor` supplied to `Kendo React Popup`. Validation failed.');\n            }\n        },\n        appendTo: function (props) {\n            var element = props.appendTo;\n            if (element && typeof element.nodeType !== 'number') {\n                return new Error('Invalid prop `appendTo` supplied to `Kendo React Popup`. Validation failed.');\n            }\n        },\n        className: PropTypes.string,\n        id: PropTypes.string,\n        popupClass: PropTypes.string,\n        collision: PropTypes.shape({\n            horizontal: PropTypes.oneOf([\n                CollisionType.fit,\n                CollisionType.flip\n            ]),\n            vertical: PropTypes.oneOf([\n                CollisionType.fit,\n                CollisionType.flip\n            ])\n        }),\n        anchorAlign: PropTypes.shape({\n            horizontal: PropTypes.oneOf([\n                AlignPoint.left,\n                AlignPoint.center,\n                AlignPoint.right\n            ]),\n            vertical: PropTypes.oneOf([\n                AlignPoint.top,\n                AlignPoint.center,\n                AlignPoint.bottom\n            ])\n        }),\n        popupAlign: PropTypes.shape({\n            horizontal: PropTypes.oneOf([\n                AlignPoint.left,\n                AlignPoint.center,\n                AlignPoint.right\n            ]),\n            vertical: PropTypes.oneOf([\n                AlignPoint.top,\n                AlignPoint.center,\n                AlignPoint.bottom\n            ])\n        }),\n        offset: PropTypes.shape({\n            left: PropTypes.number,\n            top: PropTypes.number\n        }),\n        children: PropTypes.oneOfType([\n            PropTypes.element,\n            PropTypes.node\n        ]),\n        show: PropTypes.bool,\n        animate: PropTypes.oneOfType([\n            PropTypes.bool,\n            PropTypes.shape({\n                openDuration: PropTypes.number,\n                closeDuration: PropTypes.number\n            })\n        ])\n    };\n    /**\n     * @hidden\n     */\n    Popup.defaultProps = {\n        collision: {\n            horizontal: CollisionType.fit,\n            vertical: CollisionType.flip\n        },\n        anchorAlign: {\n            horizontal: AlignPoint.left,\n            vertical: AlignPoint.bottom\n        },\n        popupAlign: {\n            horizontal: AlignPoint.left,\n            vertical: AlignPoint.top\n        },\n        offset: DEFAULT_OFFSET,\n        animate: true,\n        show: false\n    };\n    return Popup;\n}(React.Component));\nexport default Popup;\n//# sourceMappingURL=Popup.js.map"]},"metadata":{},"sourceType":"module"}