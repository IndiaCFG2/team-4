{"ast":null,"code":"var focusableRegex = /^(?:a|input|select|option|textarea|button|object)$/i;\nvar NODE_NAME_PREDICATES = {};\n\nvar toClassList = function (classNames) {\n  return String(classNames).trim().split(' ');\n};\n/**\n * @hidden\n */\n\n\nexport var hasClasses = function (element, classNames) {\n  var namesList = toClassList(classNames);\n  return Boolean(toClassList(element.className).find(function (className) {\n    return namesList.indexOf(className) >= 0;\n  }));\n};\n/**\n * @hidden\n */\n\nexport var matchesClasses = function (classNames) {\n  return function (element) {\n    return hasClasses(element, classNames);\n  };\n};\n/**\n * @hidden\n */\n\nexport var matchesNodeName = function (nodeName) {\n  if (!NODE_NAME_PREDICATES[nodeName]) {\n    NODE_NAME_PREDICATES[nodeName] = function (element) {\n      return String(element.nodeName).toLowerCase() === nodeName.toLowerCase();\n    };\n  }\n\n  return NODE_NAME_PREDICATES[nodeName];\n};\n/**\n * @hidden\n */\n\nexport var closest = function (node, predicate) {\n  while (node && !predicate(node)) {\n    node = node.parentNode;\n  }\n\n  return node;\n};\n/**\n * @hidden\n */\n\nexport var closestInScope = function (node, predicate, scope) {\n  while (node && node !== scope && !predicate(node)) {\n    node = node.parentNode;\n  }\n\n  if (node !== scope) {\n    return node;\n  }\n};\n/**\n * @hidden\n */\n\nexport var contains = function (parent, node, matchSelf) {\n  if (matchSelf === void 0) {\n    matchSelf = false;\n  }\n\n  var outside = !closest(node, function (child) {\n    return child === parent;\n  });\n\n  if (outside) {\n    return false;\n  }\n\n  var el = closest(node, function (child) {\n    return child === node;\n  });\n  return el && (matchSelf || el !== parent);\n};\n/**\n * @hidden\n */\n\nexport var isVisible = function (element) {\n  var rect = element.getBoundingClientRect();\n  var hasSize = rect.width > 0 && rect.height > 0;\n  var hasPosition = rect.x !== 0 && rect.y !== 0; // Elements can have zero size due to styling, but they still count as visible.\n  // For example, the selection checkbox has no size, but is made visible through styling.\n\n  return (hasSize || hasPosition) && window.getComputedStyle(element).visibility !== 'hidden';\n};\n/**\n * @hidden\n */\n\nexport var isFocusable = function (element, checkVisibility) {\n  if (checkVisibility === void 0) {\n    checkVisibility = true;\n  }\n\n  if (element.tagName) {\n    var tagName = element.tagName.toLowerCase();\n    var tabIndex = element.getAttribute('tabIndex');\n    var skipTab = tabIndex === '-1';\n    var focusable = tabIndex !== null && !skipTab;\n\n    if (focusableRegex.test(tagName)) {\n      focusable = !element.disabled && !skipTab;\n    }\n\n    return focusable && (!checkVisibility || isVisible(element));\n  }\n\n  return false;\n};\n/**\n * @hidden\n */\n\nexport var findElement = function (node, predicate, matchSelf) {\n  if (matchSelf === void 0) {\n    matchSelf = true;\n  }\n\n  if (!node) {\n    return;\n  }\n\n  if (matchSelf && predicate(node)) {\n    return node;\n  }\n\n  node = node.firstChild;\n\n  while (node) {\n    if (node.nodeType === 1) {\n      var element = findElement(node, predicate);\n\n      if (element) {\n        return element;\n      }\n    }\n\n    node = node.nextSibling;\n  }\n};\n/**\n * @hidden\n */\n\nexport var findFocusable = function (element, checkVisibility) {\n  if (checkVisibility === void 0) {\n    checkVisibility = true;\n  }\n\n  return findElement(element, function (node) {\n    return isFocusable(node, checkVisibility);\n  });\n};\n/**\n * @hidden\n */\n\nexport var findFocusableChild = function (element, checkVisibility) {\n  if (checkVisibility === void 0) {\n    checkVisibility = true;\n  }\n\n  return findElement(element, function (node) {\n    return isFocusable(node, checkVisibility);\n  }, false);\n};","map":{"version":3,"sources":["../../../src/common/dom-queries.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var focusableRegex = /^(?:a|input|select|option|textarea|button|object)$/i;\nvar NODE_NAME_PREDICATES = {};\nvar toClassList = function (classNames) { return String(classNames).trim().split(' '); };\n/**\n * @hidden\n */\nexport var hasClasses = function (element, classNames) {\n    var namesList = toClassList(classNames);\n    return Boolean(toClassList(element.className).find(function (className) { return namesList.indexOf(className) >= 0; }));\n};\n/**\n * @hidden\n */\nexport var matchesClasses = function (classNames) {\n    return function (element) { return hasClasses(element, classNames); };\n};\n/**\n * @hidden\n */\nexport var matchesNodeName = function (nodeName) {\n    if (!NODE_NAME_PREDICATES[nodeName]) {\n        NODE_NAME_PREDICATES[nodeName] = function (element) {\n            return String(element.nodeName).toLowerCase() === nodeName.toLowerCase();\n        };\n    }\n    return NODE_NAME_PREDICATES[nodeName];\n};\n/**\n * @hidden\n */\nexport var closest = function (node, predicate) {\n    while (node && !predicate(node)) {\n        node = node.parentNode;\n    }\n    return node;\n};\n/**\n * @hidden\n */\nexport var closestInScope = function (node, predicate, scope) {\n    while (node && node !== scope && !predicate(node)) {\n        node = node.parentNode;\n    }\n    if (node !== scope) {\n        return node;\n    }\n};\n/**\n * @hidden\n */\nexport var contains = function (parent, node, matchSelf) {\n    if (matchSelf === void 0) { matchSelf = false; }\n    var outside = !closest(node, function (child) { return child === parent; });\n    if (outside) {\n        return false;\n    }\n    var el = closest(node, function (child) { return child === node; });\n    return el && (matchSelf || el !== parent);\n};\n/**\n * @hidden\n */\nexport var isVisible = function (element) {\n    var rect = element.getBoundingClientRect();\n    var hasSize = rect.width > 0 && rect.height > 0;\n    var hasPosition = rect.x !== 0 && rect.y !== 0;\n    // Elements can have zero size due to styling, but they still count as visible.\n    // For example, the selection checkbox has no size, but is made visible through styling.\n    return (hasSize || hasPosition) && window.getComputedStyle(element).visibility !== 'hidden';\n};\n/**\n * @hidden\n */\nexport var isFocusable = function (element, checkVisibility) {\n    if (checkVisibility === void 0) { checkVisibility = true; }\n    if (element.tagName) {\n        var tagName = element.tagName.toLowerCase();\n        var tabIndex = element.getAttribute('tabIndex');\n        var skipTab = tabIndex === '-1';\n        var focusable = tabIndex !== null && !skipTab;\n        if (focusableRegex.test(tagName)) {\n            focusable = !element.disabled && !skipTab;\n        }\n        return focusable && (!checkVisibility || isVisible(element));\n    }\n    return false;\n};\n/**\n * @hidden\n */\nexport var findElement = function (node, predicate, matchSelf) {\n    if (matchSelf === void 0) { matchSelf = true; }\n    if (!node) {\n        return;\n    }\n    if (matchSelf && predicate(node)) {\n        return node;\n    }\n    node = node.firstChild;\n    while (node) {\n        if (node.nodeType === 1) {\n            var element = findElement(node, predicate);\n            if (element) {\n                return element;\n            }\n        }\n        node = node.nextSibling;\n    }\n};\n/**\n * @hidden\n */\nexport var findFocusable = function (element, checkVisibility) {\n    if (checkVisibility === void 0) { checkVisibility = true; }\n    return findElement(element, function (node) { return isFocusable(node, checkVisibility); });\n};\n/**\n * @hidden\n */\nexport var findFocusableChild = function (element, checkVisibility) {\n    if (checkVisibility === void 0) { checkVisibility = true; }\n    return findElement(element, function (node) { return isFocusable(node, checkVisibility); }, false);\n};\n//# sourceMappingURL=dom-queries.js.map"]},"metadata":{},"sourceType":"module"}